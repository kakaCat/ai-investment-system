<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>仪表板 - AI分析模块 - 投资管理系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .analysis-card {
            transition: all 0.3s ease;
        }

        .analysis-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            height: 4px;
            background: #e5e7eb;
            border-radius: 999px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
        }

        .stock-checkbox:checked + label {
            background: #eff6ff;
            border-color: #3b82f6;
        }

        .badge-green {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-red {
            background: #fee2e2;
            color: #991b1b;
        }

        .badge-yellow {
            background: #fef3c7;
            color: #92400e;
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- 顶部导航 -->
    <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-xl font-bold">📊 投资仪表板</h1>
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-600">AI Token: <span class="font-semibold text-blue-600">48,200</span></span>
                    <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        📋 查看历史分析
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主内容 -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">

        <!-- 资产概览卡片（简化版） -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="bg-white rounded-lg border border-gray-200 p-6">
                <div class="text-sm text-gray-600">总资产</div>
                <div class="text-2xl font-bold text-gray-900 mt-1">¥285,340</div>
                <div class="text-sm text-green-600 mt-2">+8,520 (+3.08%)</div>
            </div>
            <div class="bg-white rounded-lg border border-gray-200 p-6">
                <div class="text-sm text-gray-600">今日盈亏</div>
                <div class="text-2xl font-bold text-green-600 mt-1">+¥3,250</div>
                <div class="text-sm text-gray-600 mt-2">+1.15%</div>
            </div>
            <div class="bg-white rounded-lg border border-gray-200 p-6">
                <div class="text-sm text-gray-600">持仓股票</div>
                <div class="text-2xl font-bold text-gray-900 mt-1">3 支</div>
                <div class="text-sm text-gray-600 mt-2">3 个市场</div>
            </div>
            <div class="bg-white rounded-lg border border-gray-200 p-6">
                <div class="text-sm text-gray-600">关注股票</div>
                <div class="text-2xl font-bold text-gray-900 mt-1">5 支</div>
                <div class="text-sm text-blue-600 mt-2 cursor-pointer hover:underline">管理关注</div>
            </div>
        </div>

        <!-- AI分析模块 -->
        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden mb-6">
            <!-- 模块标题 -->
            <div class="gradient-bg px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <span class="text-3xl">🤖</span>
                        <div>
                            <h2 class="text-xl font-bold text-white">AI智能分析</h2>
                            <p class="text-white/80 text-sm">选择股票进行AI分析，获取投资建议</p>
                        </div>
                    </div>
                    <button onclick="startAnalysis()" class="px-6 py-2.5 bg-white text-purple-700 rounded-lg hover:bg-purple-50 font-semibold transition-all">
                        开始分析 🚀
                    </button>
                </div>
            </div>

            <!-- 股票选择区域 -->
            <div class="p-6 bg-gray-50 border-b">
                <div class="mb-4 flex items-center justify-between">
                    <h3 class="text-sm font-semibold text-gray-900">参与分析的股票（默认全部）</h3>
                    <div class="flex gap-2">
                        <button onclick="selectAll()" class="px-3 py-1.5 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                            全选
                        </button>
                        <button onclick="selectNone()" class="px-3 py-1.5 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                            全不选
                        </button>
                        <button onclick="selectHoldings()" class="px-3 py-1.5 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                            仅持仓
                        </button>
                        <button onclick="selectWatchlist()" class="px-3 py-1.5 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                            仅关注
                        </button>
                    </div>
                </div>

                <!-- 持仓股票 -->
                <div class="mb-4">
                    <div class="text-xs font-semibold text-gray-500 uppercase mb-2">持仓股票 (3支)</div>
                    <div class="grid grid-cols-1 gap-2">
                        <!-- 股票1 -->
                        <div class="bg-white rounded-lg border border-gray-200 p-3 hover:border-blue-300 transition">
                            <input type="checkbox" id="stock-600600" class="stock-checkbox hidden" data-type="holding" checked>
                            <label for="stock-600600" class="flex items-center justify-between cursor-pointer">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-lg flex items-center justify-center text-white font-bold">
                                        🍺
                                    </div>
                                    <div>
                                        <div class="font-semibold text-gray-900">青岛啤酒</div>
                                        <div class="text-xs text-gray-500">600600 · A股</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold text-gray-900">¥65.80</div>
                                    <div class="text-xs text-red-600">-2.1%</div>
                                </div>
                            </label>
                        </div>

                        <!-- 股票2 -->
                        <div class="bg-white rounded-lg border border-gray-200 p-3 hover:border-blue-300 transition">
                            <input type="checkbox" id="stock-00700" class="stock-checkbox hidden" data-type="holding" checked>
                            <label for="stock-00700" class="flex items-center justify-between cursor-pointer">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center text-white font-bold">
                                        🎮
                                    </div>
                                    <div>
                                        <div class="font-semibold text-gray-900">腾讯控股</div>
                                        <div class="text-xs text-gray-500">00700 · 港股</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold text-gray-900">HK$368.00</div>
                                    <div class="text-xs text-green-600">+1.5%</div>
                                </div>
                            </label>
                        </div>

                        <!-- 股票3 -->
                        <div class="bg-white rounded-lg border border-gray-200 p-3 hover:border-blue-300 transition">
                            <input type="checkbox" id="stock-300750" class="stock-checkbox hidden" data-type="holding" checked>
                            <label for="stock-300750" class="flex items-center justify-between cursor-pointer">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-lg flex items-center justify-center text-white font-bold">
                                        🔋
                                    </div>
                                    <div>
                                        <div class="font-semibold text-gray-900">宁德时代</div>
                                        <div class="text-xs text-gray-500">300750 · A股</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold text-gray-900">¥195.80</div>
                                    <div class="text-xs text-green-600">+2.3%</div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 关注股票 -->
                <div>
                    <div class="text-xs font-semibold text-gray-500 uppercase mb-2">关注股票 (5支)</div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                        <!-- 关注股票1 -->
                        <div class="bg-white rounded-lg border border-gray-200 p-3 hover:border-blue-300 transition">
                            <input type="checkbox" id="stock-600519" class="stock-checkbox hidden" data-type="watchlist">
                            <label for="stock-600519" class="flex items-center justify-between cursor-pointer">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gradient-to-br from-red-400 to-red-600 rounded-lg flex items-center justify-center text-white text-sm">
                                        🍷
                                    </div>
                                    <div>
                                        <div class="text-sm font-semibold text-gray-900">茅台</div>
                                        <div class="text-xs text-gray-500">600519</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm font-semibold text-gray-900">¥1650</div>
                                    <div class="text-xs text-red-600">-0.8%</div>
                                </div>
                            </label>
                        </div>

                        <!-- 关注股票2 -->
                        <div class="bg-white rounded-lg border border-gray-200 p-3 hover:border-blue-300 transition">
                            <input type="checkbox" id="stock-002594" class="stock-checkbox hidden" data-type="watchlist">
                            <label for="stock-002594" class="flex items-center justify-between cursor-pointer">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center text-white text-sm">
                                        🚗
                                    </div>
                                    <div>
                                        <div class="text-sm font-semibold text-gray-900">比亚迪</div>
                                        <div class="text-xs text-gray-500">002594</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm font-semibold text-gray-900">¥215.6</div>
                                    <div class="text-xs text-green-600">+3.2%</div>
                                </div>
                            </label>
                        </div>

                        <!-- 关注股票3 -->
                        <div class="bg-white rounded-lg border border-gray-200 p-3 hover:border-blue-300 transition">
                            <input type="checkbox" id="stock-02015" class="stock-checkbox hidden" data-type="watchlist">
                            <label for="stock-02015" class="flex items-center justify-between cursor-pointer">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-lg flex items-center justify-center text-white text-sm">
                                        🚙
                                    </div>
                                    <div>
                                        <div class="text-sm font-semibold text-gray-900">理想汽车</div>
                                        <div class="text-xs text-gray-500">02015</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm font-semibold text-gray-900">HK$102</div>
                                    <div class="text-xs text-green-600">+4.5%</div>
                                </div>
                            </label>
                        </div>

                        <!-- 关注股票4 -->
                        <div class="bg-white rounded-lg border border-gray-200 p-3 hover:border-blue-300 transition">
                            <input type="checkbox" id="stock-600036" class="stock-checkbox hidden" data-type="watchlist">
                            <label for="stock-600036" class="flex items-center justify-between cursor-pointer">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gradient-to-br from-indigo-400 to-indigo-600 rounded-lg flex items-center justify-center text-white text-sm">
                                        🏦
                                    </div>
                                    <div>
                                        <div class="text-sm font-semibold text-gray-900">招商银行</div>
                                        <div class="text-xs text-gray-500">600036</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm font-semibold text-gray-900">¥35.2</div>
                                    <div class="text-xs text-red-600">-1.2%</div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Token统计 -->
                <div class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between">
                    <div class="flex items-center gap-2">
                        <span class="text-blue-800 text-sm">预计消耗: <span class="font-bold" id="estimated-tokens">~300 tokens</span></span>
                        <span class="text-gray-400">|</span>
                        <span class="text-gray-600 text-sm">剩余: <span class="font-semibold">48,200 tokens</span></span>
                    </div>
                    <div class="text-xs text-gray-500">已选择: <span class="font-semibold" id="selected-count">3</span> 支</div>
                </div>
            </div>

            <!-- 分析进度区域 (隐藏，分析时显示) -->
            <div id="analysis-progress" class="p-6 bg-white border-b hidden">
                <div class="mb-4">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-lg font-semibold text-gray-900">AI分析中...</h3>
                        <span class="text-sm text-gray-600">预计剩余: <span id="time-remaining">约 45秒</span></span>
                    </div>
                    <div class="progress-bar">
                        <div id="progress-bar" class="progress-fill" style="width: 60%"></div>
                    </div>
                    <div class="text-sm text-gray-600 mt-1"><span id="progress-percent">60</span>% (3/5)</div>
                </div>

                <div class="space-y-2">
                    <div class="flex items-center gap-3 p-3 bg-green-50 border border-green-200 rounded-lg">
                        <span class="text-green-600 text-xl">✅</span>
                        <div class="flex-1">
                            <span class="font-medium text-gray-900">青岛啤酒</span>
                            <span class="text-sm text-gray-600 ml-2">分析完成</span>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-green-50 border border-green-200 rounded-lg">
                        <span class="text-green-600 text-xl">✅</span>
                        <div class="flex-1">
                            <span class="font-medium text-gray-900">腾讯控股</span>
                            <span class="text-sm text-gray-600 ml-2">分析完成</span>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                        <span class="text-blue-600 text-xl animate-spin">⏳</span>
                        <div class="flex-1">
                            <span class="font-medium text-gray-900">宁德时代</span>
                            <span class="text-sm text-gray-600 ml-2">分析中...</span>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-gray-50 border border-gray-200 rounded-lg">
                        <span class="text-gray-400 text-xl">⏸️</span>
                        <div class="flex-1">
                            <span class="font-medium text-gray-500">茅台</span>
                            <span class="text-sm text-gray-500 ml-2">等待中</span>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-gray-50 border border-gray-200 rounded-lg">
                        <span class="text-gray-400 text-xl">⏸️</span>
                        <div class="flex-1">
                            <span class="font-medium text-gray-500">比亚迪</span>
                            <span class="text-sm text-gray-500 ml-2">等待中</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 分析结果区域 -->
            <div id="analysis-results" class="p-6 bg-white">
                <div class="mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">分析结果</h3>
                    <p class="text-sm text-gray-600 mt-1">基于AI分析的投资建议，请结合您的投资逻辑判断</p>
                </div>

                <div class="space-y-4">
                    <!-- 分析卡片1 - 青岛啤酒 -->
                    <div class="analysis-card bg-white rounded-lg border border-gray-200 overflow-hidden">
                        <div class="bg-gradient-to-r from-yellow-50 to-white px-6 py-4 border-b">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-lg flex items-center justify-center text-white font-bold text-xl">
                                        🍺
                                    </div>
                                    <div>
                                        <h4 class="text-lg font-bold text-gray-900">青岛啤酒 (600600)</h4>
                                        <p class="text-sm text-gray-600">A股 · 食品饮料 · 啤酒行业</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm text-gray-600">AI综合评分</div>
                                    <div class="text-3xl font-bold text-yellow-600">7.2<span class="text-lg text-gray-400">/10</span></div>
                                </div>
                            </div>
                        </div>

                        <div class="px-6 py-4">
                            <div class="grid grid-cols-3 gap-4 mb-4">
                                <div class="text-center">
                                    <div class="text-xs text-gray-600">当前价</div>
                                    <div class="text-lg font-bold text-gray-900">¥65.80</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-gray-600">成本价</div>
                                    <div class="text-lg font-bold text-gray-900">¥78.40</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-gray-600">盈亏</div>
                                    <div class="text-lg font-bold text-red-600">-16.1%</div>
                                </div>
                            </div>

                            <div class="mb-4 p-3 bg-blue-50 rounded-lg">
                                <div class="text-sm font-semibold text-blue-900 mb-2">🎯 AI建议: 持有，等待回调后加仓</div>
                                <div class="flex gap-2">
                                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">基本面: 8/10</span>
                                    <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">技术面: 6/10</span>
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">估值: 7/10</span>
                                </div>
                            </div>

                            <div class="mb-4">
                                <div class="text-sm font-semibold text-gray-900 mb-2">💡 核心观点:</div>
                                <ul class="space-y-1 text-sm text-gray-700">
                                    <li>• 基本面稳健，白酒消费复苏利好啤酒板块</li>
                                    <li>• 当前估值合理（PE 18.5x，低于3年均值20x）</li>
                                    <li>• 技术面短期超卖，MACD即将金叉</li>
                                </ul>
                            </div>

                            <div class="mb-4 p-4 bg-gray-50 rounded-lg">
                                <div class="text-sm font-semibold text-gray-900 mb-3">📋 建议操作策略:</div>
                                <div class="space-y-2 text-sm">
                                    <div>
                                        <div class="text-xs font-semibold text-gray-700 mb-1">🎯 加仓价位:</div>
                                        <div class="text-gray-700 ml-4">
                                            • 第一批: ¥62-64（回调5%左右），加仓30%<br>
                                            • 第二批: ¥58-60（回调10%），加仓50%
                                        </div>
                                    </div>
                                    <div>
                                        <div class="text-xs font-semibold text-gray-700 mb-1">💰 资金配置:</div>
                                        <div class="text-gray-700 ml-4">
                                            • 建议增持至组合10-12%（当前7.3%）<br>
                                            • 单笔加仓金额: 1-2万元
                                        </div>
                                    </div>
                                    <div>
                                        <div class="text-xs font-semibold text-gray-700 mb-1">🛡️ 风险控制:</div>
                                        <div class="text-gray-700 ml-4">
                                            • 止损位: ¥55（-15%），严格执行<br>
                                            • 仓位上限: 不超过12%
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-3 mb-4">
                                <div class="p-3 bg-green-50 border border-green-200 rounded-lg">
                                    <div class="text-xs text-green-700 mb-1">3个月目标价</div>
                                    <div class="text-lg font-bold text-green-700">¥78-82</div>
                                    <div class="text-xs text-green-600">+18% ~ +25%</div>
                                </div>
                                <div class="p-3 bg-emerald-50 border border-emerald-200 rounded-lg">
                                    <div class="text-xs text-emerald-700 mb-1">6个月目标价</div>
                                    <div class="text-lg font-bold text-emerald-700">¥85-90</div>
                                    <div class="text-xs text-emerald-600">+29% ~ +37%</div>
                                </div>
                            </div>

                            <div class="flex items-center justify-between text-xs text-gray-500 pt-3 border-t">
                                <div>分析时间: 2025-01-17 15:35 · Token消耗: 156</div>
                                <div class="flex gap-2">
                                    <button class="px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-xs">查看详情</button>
                                    <button class="px-3 py-1.5 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-xs">对话追问💬</button>
                                    <button class="px-3 py-1.5 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-xs">我的评价</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 分析卡片2 - 腾讯控股 (简化版) -->
                    <div class="analysis-card bg-white rounded-lg border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-xl">
                                    🎮
                                </div>
                                <div>
                                    <h4 class="text-lg font-bold text-gray-900">腾讯控股 (00700)</h4>
                                    <p class="text-sm text-gray-600">港股 · 互联网服务</p>
                                </div>
                            </div>
                            <div class="text-3xl font-bold text-green-600">8.5<span class="text-lg text-gray-400">/10</span></div>
                        </div>

                        <div class="p-3 bg-green-50 rounded-lg mb-4">
                            <div class="text-sm font-semibold text-green-900">🎯 AI建议: 持有</div>
                            <div class="text-sm text-green-800 mt-1">基本面优秀，估值合理，建议继续持有</div>
                        </div>

                        <div class="grid grid-cols-2 gap-3">
                            <div class="p-3 bg-green-50 border border-green-200 rounded-lg">
                                <div class="text-xs text-green-700 mb-1">3个月目标</div>
                                <div class="text-lg font-bold text-green-700">HK$420-450</div>
                                <div class="text-xs text-green-600">+15% ~ +22%</div>
                            </div>
                            <div class="p-3 bg-gray-50 border border-gray-200 rounded-lg">
                                <div class="text-xs text-gray-700 mb-1">风险等级</div>
                                <div class="text-lg font-bold text-gray-700">低</div>
                                <div class="text-xs text-gray-600">稳健标的</div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between mt-4 pt-4 border-t">
                            <div class="text-xs text-gray-500">Token: 142</div>
                            <div class="flex gap-2">
                                <button class="px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-xs">查看详情</button>
                                <button class="px-3 py-1.5 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-xs">对话💬</button>
                            </div>
                        </div>
                    </div>

                    <!-- 分析卡片3 - 宁德时代 (简化版) -->
                    <div class="analysis-card bg-white rounded-lg border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-green-600 rounded-lg flex items-center justify-center text-white font-bold text-xl">
                                    🔋
                                </div>
                                <div>
                                    <h4 class="text-lg font-bold text-gray-900">宁德时代 (300750)</h4>
                                    <p class="text-sm text-gray-600">A股 · 新能源汽车</p>
                                </div>
                            </div>
                            <div class="text-3xl font-bold text-red-600">6.8<span class="text-lg text-gray-400">/10</span></div>
                        </div>

                        <div class="p-3 bg-yellow-50 rounded-lg mb-4">
                            <div class="text-sm font-semibold text-yellow-900">⚠️ AI建议: 减仓</div>
                            <div class="text-sm text-yellow-800 mt-1">短期压力较大，建议逢高减仓</div>
                        </div>

                        <div class="grid grid-cols-2 gap-3">
                            <div class="p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                                <div class="text-xs text-yellow-700 mb-1">3个月目标</div>
                                <div class="text-lg font-bold text-yellow-700">¥205-215</div>
                                <div class="text-xs text-yellow-600">+5% ~ +10%</div>
                            </div>
                            <div class="p-3 bg-red-50 border border-red-200 rounded-lg">
                                <div class="text-xs text-red-700 mb-1">风险等级</div>
                                <div class="text-lg font-bold text-red-700">高</div>
                                <div class="text-xs text-red-600">谨慎对待</div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between mt-4 pt-4 border-t">
                            <div class="text-xs text-gray-500">Token: 168</div>
                            <div class="flex gap-2">
                                <button class="px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-xs">查看详情</button>
                                <button class="px-3 py-1.5 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-xs">对话💬</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 汇总表格 -->
        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden">
            <div class="px-6 py-4 bg-gray-50 border-b">
                <h3 class="text-lg font-semibold text-gray-900">AI建议汇总表</h3>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50 border-b">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase">股票</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase">当前价</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase">AI评分</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase">AI建议</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase">加仓价位</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase">目标涨幅(3M)</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase">风险等级</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase">操作</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center gap-2">
                                    <span class="text-xl">🍺</span>
                                    <span class="font-medium text-gray-900">青岛啤酒</span>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-900">¥65.8</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-sm font-semibold">7.2</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="badge-green px-2 py-1 rounded text-xs font-semibold">持有+加仓</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-700">¥62-64</td>
                            <td class="px-6 py-4 whitespace-nowrap text-green-600 font-semibold">+18% ~ +25%</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="badge-yellow px-2 py-1 rounded text-xs font-semibold">中</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">详情 →</button>
                            </td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center gap-2">
                                    <span class="text-xl">🎮</span>
                                    <span class="font-medium text-gray-900">腾讯控股</span>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-900">HK$368</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-sm font-semibold">8.5</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="badge-green px-2 py-1 rounded text-xs font-semibold">持有</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-500">-</td>
                            <td class="px-6 py-4 whitespace-nowrap text-green-600 font-semibold">+15% ~ +22%</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="badge-green px-2 py-1 rounded text-xs font-semibold">低</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">详情 →</button>
                            </td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center gap-2">
                                    <span class="text-xl">🔋</span>
                                    <span class="font-medium text-gray-900">宁德时代</span>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-900">¥195.8</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 py-1 bg-red-100 text-red-800 rounded text-sm font-semibold">6.8</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="badge-red px-2 py-1 rounded text-xs font-semibold">减仓</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-500">-</td>
                            <td class="px-6 py-4 whitespace-nowrap text-yellow-600 font-semibold">+5% ~ +10%</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="badge-red px-2 py-1 rounded text-xs font-semibold">高</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">详情 →</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <script>
        // 统计选中的股票数量
        function updateSelectedCount() {
            const checkedBoxes = document.querySelectorAll('.stock-checkbox:checked');
            document.getElementById('selected-count').textContent = checkedBoxes.length;
            document.getElementById('estimated-tokens').textContent = '~' + (checkedBoxes.length * 100) + ' tokens';
        }

        // 全选
        function selectAll() {
            document.querySelectorAll('.stock-checkbox').forEach(cb => cb.checked = true);
            updateSelectedCount();
        }

        // 全不选
        function selectNone() {
            document.querySelectorAll('.stock-checkbox').forEach(cb => cb.checked = false);
            updateSelectedCount();
        }

        // 仅持仓
        function selectHoldings() {
            document.querySelectorAll('.stock-checkbox').forEach(cb => {
                cb.checked = cb.dataset.type === 'holding';
            });
            updateSelectedCount();
        }

        // 仅关注
        function selectWatchlist() {
            document.querySelectorAll('.stock-checkbox').forEach(cb => {
                cb.checked = cb.dataset.type === 'watchlist';
            });
            updateSelectedCount();
        }

        // 开始分析
        function startAnalysis() {
            const checkedCount = document.querySelectorAll('.stock-checkbox:checked').length;
            if (checkedCount === 0) {
                alert('请至少选择一支股票进行分析');
                return;
            }

            // 显示进度区域
            document.getElementById('analysis-progress').classList.remove('hidden');

            // 模拟进度更新
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                document.getElementById('progress-bar').style.width = progress + '%';
                document.getElementById('progress-percent').textContent = progress;

                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        document.getElementById('analysis-progress').classList.add('hidden');
                        alert('AI分析完成！结果已展示在下方');
                    }, 500);
                }
            }, 1000);
        }

        // 监听checkbox变化
        document.querySelectorAll('.stock-checkbox').forEach(cb => {
            cb.addEventListener('change', updateSelectedCount);
        });

        // 初始化
        updateSelectedCount();
    </script>

</body>
</html>
