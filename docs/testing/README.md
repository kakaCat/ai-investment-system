# æµ‹è¯•æ–‡æ¡£

> æŠ•èµ„ç®¡ç†ç³»ç»Ÿçš„æµ‹è¯•ç­–ç•¥ã€æŒ‡å—å’ŒæŠ¥å‘Š

---

## ğŸ“ ç›®å½•ç»“æ„

```
testing/
â”œâ”€â”€ README.md              # æœ¬æ–‡ä»¶ - æµ‹è¯•æ–‡æ¡£æ€»ç´¢å¼•
â”œâ”€â”€ strategy/              # æµ‹è¯•ç­–ç•¥
â”‚   â”œâ”€â”€ README.md
â”‚   â””â”€â”€ test-strategy.md   # æ•´ä½“æµ‹è¯•ç­–ç•¥å’Œè§„åˆ’
â”œâ”€â”€ guides/                # æµ‹è¯•æŒ‡å—
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ ui-testing-guide.md          # UIè‡ªåŠ¨åŒ–æµ‹è¯•æŒ‡å—
â”‚   â”œâ”€â”€ integration-testing-guide.md # é›†æˆæµ‹è¯•æŒ‡å—
â”‚   â””â”€â”€ unit-testing-guide.md        # å•å…ƒæµ‹è¯•æŒ‡å—
â”œâ”€â”€ reports/               # æµ‹è¯•æŠ¥å‘Š
â”‚   â”œâ”€â”€ README.md
â”‚   â””â”€â”€ 2025-11-19-ui-test-results.md # æœ€æ–°UIæµ‹è¯•æŠ¥å‘Š
â””â”€â”€ coverage/              # æµ‹è¯•è¦†ç›–ç‡
    â”œâ”€â”€ README.md
    â””â”€â”€ current-coverage.md           # å½“å‰æµ‹è¯•è¦†ç›–æƒ…å†µ
```

---

## ğŸ¯ æ–‡æ¡£æ¦‚è§ˆ

### æµ‹è¯•ç­–ç•¥ (strategy/)

å®šä¹‰æ•´ä½“æµ‹è¯•æ–¹æ³•ã€æµ‹è¯•é‡‘å­—å¡”ã€æµ‹è¯•ç¯å¢ƒå’Œæµ‹è¯•æµç¨‹ã€‚

**æ ¸å¿ƒæ–‡æ¡£**:
- [æ•´ä½“æµ‹è¯•ç­–ç•¥](strategy/test-strategy.md) - æµ‹è¯•ç±»å‹ã€ä¼˜å…ˆçº§ã€è´¨é‡æ ‡å‡†

### æµ‹è¯•æŒ‡å— (guides/)

è¯¦ç»†çš„æµ‹è¯•æ‰§è¡ŒæŒ‡å—ï¼ŒåŒ…æ‹¬ç¯å¢ƒé…ç½®ã€æµ‹è¯•ç¼–å†™è§„èŒƒå’Œæœ€ä½³å®è·µã€‚

**æ ¸å¿ƒæ–‡æ¡£**:
- [UIè‡ªåŠ¨åŒ–æµ‹è¯•æŒ‡å—](guides/ui-testing-guide.md) - Playwright E2Eæµ‹è¯•
- [é›†æˆæµ‹è¯•æŒ‡å—](guides/integration-testing-guide.md) - APIå’ŒæœåŠ¡é›†æˆæµ‹è¯•
- [å•å…ƒæµ‹è¯•æŒ‡å—](guides/unit-testing-guide.md) - Service/Converter/Repositoryå•å…ƒæµ‹è¯•

### æµ‹è¯•æŠ¥å‘Š (reports/)

å®šæœŸç”Ÿæˆçš„æµ‹è¯•æ‰§è¡ŒæŠ¥å‘Šï¼Œè®°å½•æµ‹è¯•ç»“æœå’Œå‘ç°çš„é—®é¢˜ã€‚

**æœ€æ–°æŠ¥å‘Š**:
- [2025-11-19 UIæµ‹è¯•æŠ¥å‘Š](reports/2025-11-19-ui-test-results.md) - é€šè¿‡ç‡81.2%

### æµ‹è¯•è¦†ç›–ç‡ (coverage/)

æµ‹è¯•è¦†ç›–ç‡ç»Ÿè®¡å’Œåˆ†æï¼Œè¿½è¸ªæµ‹è¯•è´¨é‡ã€‚

**å½“å‰è¦†ç›–**:
- [å½“å‰æµ‹è¯•è¦†ç›–æƒ…å†µ](coverage/current-coverage.md) - åŠŸèƒ½è¦†ç›–ã€ä»£ç è¦†ç›–

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¿è¡Œæµ‹è¯•

**UIè‡ªåŠ¨åŒ–æµ‹è¯•**:
```bash
# å¯åŠ¨å‰åç«¯æœåŠ¡
cd backend && uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload &
cd frontend && npm run dev &

# è¿è¡ŒUIæµ‹è¯•ï¼ˆæµ‹è¯•è„šæœ¬åœ¨ backend/tests/ui/scripts/ï¼‰
cd backend/tests/ui/scripts
python comprehensive_ui_test.py
```

**é›†æˆæµ‹è¯•** (å¾…å®ç°):
```bash
cd backend
pytest tests/integration/
```

**å•å…ƒæµ‹è¯•** (å¾…å®ç°):
```bash
cd backend
pytest tests/unit/
```

### æŸ¥çœ‹æµ‹è¯•ç»“æœ

- **æµ‹è¯•æˆªå›¾**: `backend/tests/ui/screenshots/`
- **æµ‹è¯•æ—¥å¿—**: æ§åˆ¶å°è¾“å‡º
- **æµ‹è¯•æŠ¥å‘Š**: [reports/](reports/) ç›®å½•

---

## ğŸ“Š å½“å‰æµ‹è¯•çŠ¶æ€

### å·²å®Œæˆ âœ…

| æµ‹è¯•ç±»å‹ | çŠ¶æ€ | è¦†ç›–ç‡ | æœ€åæ›´æ–° |
|---------|------|--------|---------|
| UIè‡ªåŠ¨åŒ–æµ‹è¯• | âœ… è¿è¡Œä¸­ | 81.2% (13/16) | 2025-11-19 |
| é›†æˆæµ‹è¯• | ğŸš§ å¾…å¼€å‘ | 0% | - |
| å•å…ƒæµ‹è¯• | ğŸš§ å¾…å¼€å‘ | 0% | - |

### æµ‹è¯•æ¦‚å†µ

- **UIæµ‹è¯•å¥—ä»¶**: 2ä¸ªï¼ˆç»¼åˆUIæµ‹è¯• + æ¨¡æ€æ¡†äº¤äº’æµ‹è¯•ï¼‰
- **æµ‹è¯•æ¨¡å—æ•°**: 12ä¸ª
- **æµ‹è¯•ç”¨ä¾‹æ•°**: 16ä¸ªï¼ˆ13ä¸ªé€šè¿‡ï¼Œ3ä¸ªå¤±è´¥ï¼‰
- **APIè°ƒç”¨æµ‹è¯•**: 19/23 æˆåŠŸ
- **æ§åˆ¶å°é”™è¯¯**: 0ä¸ª
- **ç”Ÿæˆæˆªå›¾**: 10å¼ 

---

## ğŸ“‹ æµ‹è¯•ç±»å‹è¯´æ˜

### 1. UIè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆE2Eï¼‰

**ç›®çš„**: éªŒè¯å‰ç«¯ç”¨æˆ·ç•Œé¢å’Œç”¨æˆ·æµç¨‹çš„å®Œæ•´æ€§

**æŠ€æœ¯æ ˆ**: Playwright + Python

**æµ‹è¯•èŒƒå›´**:
- é¡µé¢å¯¼èˆªå’Œè·¯ç”±
- ç»„ä»¶æ¸²æŸ“å’Œäº¤äº’
- APIè°ƒç”¨å’Œå“åº”
- è¡¨å•å¡«å†™å’ŒéªŒè¯
- æ¨¡æ€æ¡†å’Œå¯¹è¯æ¡†

**è¯¦ç»†æ–‡æ¡£**: [UIæµ‹è¯•æŒ‡å—](guides/ui-testing-guide.md)

### 2. é›†æˆæµ‹è¯•ï¼ˆAPIï¼‰

**ç›®çš„**: éªŒè¯åç«¯APIç«¯ç‚¹å’Œä¸šåŠ¡é€»è¾‘é›†æˆ

**æŠ€æœ¯æ ˆ**: pytest + FastAPI TestClient

**æµ‹è¯•èŒƒå›´**:
- RESTful APIç«¯ç‚¹
- æ•°æ®åº“æ“ä½œ
- ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆï¼ˆDeepSeekã€Tushareç­‰ï¼‰
- è®¤è¯å’Œæƒé™

**è¯¦ç»†æ–‡æ¡£**: [é›†æˆæµ‹è¯•æŒ‡å—](guides/integration-testing-guide.md)

### 3. å•å…ƒæµ‹è¯•

**ç›®çš„**: éªŒè¯å•ä¸ªå‡½æ•°å’Œç±»çš„æ­£ç¡®æ€§

**æŠ€æœ¯æ ˆ**: pytest + unittest.mock

**æµ‹è¯•èŒƒå›´**:
- Serviceå±‚ä¸šåŠ¡é€»è¾‘
- Converterè®¡ç®—å’Œè½¬æ¢
- Builderæ•°æ®æ„å»º
- Repositoryæ•°æ®è®¿é—®
- å·¥å…·å‡½æ•°

**è¯¦ç»†æ–‡æ¡£**: [å•å…ƒæµ‹è¯•æŒ‡å—](guides/unit-testing-guide.md)

---

## ğŸ”— æµ‹è¯•ä»£ç ä½ç½®

æµ‹è¯•ä»£ç ï¼ˆå®é™…çš„æµ‹è¯•è„šæœ¬ï¼‰å­˜å‚¨åœ¨ä»£ç ä»“åº“ä¸­ï¼š

```
backend/tests/              # åç«¯æµ‹è¯•ä»£ç 
â”œâ”€â”€ ui/                     # UIè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”œâ”€â”€ comprehensive_ui_test.py
â”‚   â”‚   â””â”€â”€ modal_interaction_test.py
â”‚   â””â”€â”€ screenshots/        # æµ‹è¯•æˆªå›¾è¾“å‡º
â”œâ”€â”€ integration/            # é›†æˆæµ‹è¯•ï¼ˆå¾…å¼€å‘ï¼‰
â””â”€â”€ unit/                   # å•å…ƒæµ‹è¯•ï¼ˆå¾…å¼€å‘ï¼‰

frontend/tests/             # å‰ç«¯æµ‹è¯•ï¼ˆå¾…å¼€å‘ï¼‰
â””â”€â”€ ...
```

**é‡è¦**:
- `backend/tests/` åŒ…å«å¯æ‰§è¡Œçš„æµ‹è¯•è„šæœ¬
- `docs/testing/` åŒ…å«æµ‹è¯•æ–‡æ¡£ã€ç­–ç•¥å’ŒæŠ¥å‘Š

---

## âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•

è¿è¡Œæµ‹è¯•å‰ç¡®è®¤ï¼š

- [ ] åç«¯æœåŠ¡è¿è¡Œåœ¨ http://localhost:8000
- [ ] å‰ç«¯æœåŠ¡è¿è¡Œåœ¨ http://localhost:5175
- [ ] PostgreSQLæ•°æ®åº“å·²å¯åŠ¨
- [ ] æµ‹è¯•ä¾èµ–å·²å®‰è£…ï¼ˆPlaywrightã€pytestç­‰ï¼‰
- [ ] æµ‹è¯•ç”¨æˆ·å·²åˆ›å»ºï¼ˆtestuser/Test123456ï¼‰
- [ ] æµ‹è¯•æ•°æ®å·²seedï¼ˆ`python backend/scripts/seed_test_data.py`ï¼‰

---

## ğŸ“ˆ æµ‹è¯•æ”¹è¿›è®¡åˆ’

### Phase 1 - å½“å‰é˜¶æ®µï¼ˆå·²å®Œæˆï¼‰

- [x] UIè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶æ­å»º
- [x] ç»¼åˆUIæµ‹è¯•ï¼ˆ12æ¨¡å—ï¼‰
- [x] æ¨¡æ€æ¡†äº¤äº’æµ‹è¯•æ¡†æ¶
- [x] æµ‹è¯•æˆªå›¾å’Œæ—¥å¿—

### Phase 2 - çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰

- [ ] ä¿®å¤ç™»å½•åŠŸèƒ½æµ‹è¯•
- [ ] ä¼˜åŒ–Dashboardå…ƒç´ è¯†åˆ«
- [ ] å®Œå–„æ¨¡æ€æ¡†æµ‹è¯•ï¼ˆå¾…å‰ç«¯å®ç°æŒ‰é’®ï¼‰
- [ ] æ·»åŠ é›†æˆæµ‹è¯•æ¡†æ¶

### Phase 3 - ä¸­æœŸï¼ˆ1ä¸ªæœˆï¼‰

- [ ] å®Œæ•´é›†æˆæµ‹è¯•è¦†ç›–
- [ ] Serviceå±‚å•å…ƒæµ‹è¯•
- [ ] æµ‹è¯•æ•°æ®è‡ªåŠ¨æ¸…ç†
- [ ] HTMLæµ‹è¯•æŠ¥å‘Šç”Ÿæˆ

### Phase 4 - é•¿æœŸï¼ˆ2-3ä¸ªæœˆï¼‰

- [ ] CI/CDé›†æˆ
- [ ] ä»£ç è¦†ç›–ç‡è¿½è¸ª
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] å¹¶è¡Œæµ‹è¯•æ‰§è¡Œ

---

## ğŸ”§ ç›¸å…³èµ„æº

### æ–‡æ¡£
- [æµ‹è¯•ç­–ç•¥](strategy/test-strategy.md)
- [äº§å“éœ€æ±‚æ–‡æ¡£](../prd/v3/main.md)
- [åç«¯æ¶æ„æ–‡æ¡£](../design/architecture/backend-architecture.md)
- [æ•°æ®åº“Schema](../design/database/schema-v1.md)

### å¤–éƒ¨èµ„æº
- [Playwrightæ–‡æ¡£](https://playwright.dev/python/)
- [pytestæ–‡æ¡£](https://docs.pytest.org/)
- [FastAPI Testing](https://fastapi.tiangolo.com/tutorial/testing/)

---

## ğŸ“ æ–‡æ¡£ç»´æŠ¤è§„èŒƒ

### åˆ›å»ºæµ‹è¯•æŠ¥å‘Š

æ–°çš„æµ‹è¯•æŠ¥å‘Šæ”¾åœ¨ `reports/` ç›®å½•ï¼Œä½¿ç”¨æ—¥æœŸå‘½åï¼š

```bash
reports/YYYY-MM-DD-{test-type}-results.md
```

### æ›´æ–°æµ‹è¯•è¦†ç›–ç‡

æ¯æ¬¡é‡å¤§æµ‹è¯•æ›´æ–°åï¼Œæ›´æ–° `coverage/current-coverage.md`

### ä¿®æ”¹æµ‹è¯•ç­–ç•¥

æµ‹è¯•ç­–ç•¥å˜æ›´éœ€è¦åœ¨ `strategy/test-strategy.md` ä¸­è®°å½•å˜æ›´å†å²

---

**æœ€åæ›´æ–°**: 2025-11-19
**ç»´æŠ¤è€…**: AI Development Team
**ç‰ˆæœ¬**: v1.0
