# 修改影响分析

分析修改某个文件/表/模块的影响范围，帮助评估工作量和风险。

---

请分析修改 $ARGUMENTS 的影响范围：

## 分析维度

### 1. 代码依赖分析
- **直接依赖**: 哪些文件直接 import 或引用了目标
- **间接依赖**: 依赖链上的其他文件
- **被依赖**: 目标依赖了哪些模块

### 2. 层次影响分析
根据项目架构 (Controller → Service → Converter → Builder → Repository)：
- 修改 Repository → 影响哪些 Service
- 修改 Service → 影响哪些 API
- 修改 Model → 影响整个链路

### 3. 测试影响
- 需要更新的单元测试 (`tests/unit/`)
- 需要更新的集成测试 (`tests/integration/`)
- 可能受影响的 E2E 测试 (`tests/e2e/`)

### 4. 文档影响
- API 文档是否需要更新
- 数据库 schema 文档是否需要更新
- 架构文档是否需要更新

### 5. 前端影响（如果适用）
- 哪些 API 调用会受影响
- 哪些组件需要更新
- 类型定义是否需要同步

## 输出格式

```
## 影响分析报告

### 📁 目标
- **路径**: {分析目标}
- **类型**: [Model/Repository/Service/API/...]

### 🔗 依赖关系图
```
目标文件
├── 被依赖 (上游)
│   ├── file1.py (直接)
│   └── file2.py (间接)
└── 依赖 (下游)
    └── file3.py
```

### 📝 需要修改的文件

#### 必须修改 (P0)
| 文件 | 修改原因 | 预计工作量 |
|------|----------|------------|
| ... | ... | ... |

#### 可能需要修改 (P1)
| 文件 | 修改原因 | 预计工作量 |
|------|----------|------------|
| ... | ... | ... |

### 🧪 测试更新
- [ ] `tests/unit/...`
- [ ] `tests/integration/...`

### 📚 文档更新
- [ ] `docs/...`

### ⚠️ 风险提示
- [潜在风险1]
- [潜在风险2]

### 📋 建议修改顺序
1. 先修改: ...
2. 然后: ...
3. 最后: ...

### ⏱️ 工作量估算
- 代码修改: X 小时
- 测试更新: X 小时
- 文档更新: X 小时
- 总计: X 小时
```

## 注意事项
- 如果目标是数据库表，需要分析 Model → Repository → Service → API 整个链路
- 如果目标是共享组件，需要分析所有引用点
- 关注是否会破坏现有 API 契约
