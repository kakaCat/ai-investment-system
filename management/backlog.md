# 需求池 (Product Backlog)

> 待开发的功能需求和技术任务

---

## ✅ 已完成

### AI功能（2025-11-20完成）

- [x] **AI后端实现** ✅
  - Ollama本地模型支持
  - DeepSeek API集成
  - 5个AI服务（单股分析、对话、批量分析、每日复盘、策略生成）
  - 自动降级机制（Ollama → DeepSeek → Mock）
  - 完成时间: 2025-11-20
  - 验证: scripts/quick_ai_test.py ✅

- [x] **数据源集成** ✅
  - Tushare专业数据源
  - AkShare免费数据源
  - 三级降级（Tushare → AkShare → Mock）
  - 4种数据类型（行情、基本面、技术指标、信息）
  - 完成时间: 2025-11-20
  - 验证: scripts/test_tushare_integration.py ✅

### 前端Mock数据清理（2025-11-20部分完成）

- [x] **StockSearchDialog.vue** ✅
  - 移除12条mock股票数据
  - 调用 `/api/v1/stock/search` 真实API
  - 完成时间: 2025-11-20

- [x] **TradesList.vue** ✅
  - 移除5条mock交易记录
  - 移除4个mock账户
  - 调用 `/api/v1/trade/query` 和 `/api/v1/trade/create`
  - 完成时间: 2025-11-20

- [x] **HoldingsList.vue** ⚠️ 部分完成
  - 持仓数据已接入真实API
  - AI组合建议、事件矩阵保留mock（后端接口未实现）
  - 完成时间: 2025-11-20

---

## 🔴 高优先级（P0）

### 功能需求

- [ ] **前端Mock数据清理** 🔴 **当前最高优先级**
  - 详细报告: [management/frontend-mock-cleanup.md](./frontend-mock-cleanup.md)
  - **Sprint 1: 核心功能**（估算: 2天）
    - [ ] FE-001: AccountList.vue 接入真实API (30min)
    - [ ] FE-002: StockDetail.vue 接入真实API (30min)
    - [ ] FE-003: AccountDetail.vue 接入真实API (45min)
    - [ ] BE-001: 实现操作策略管理API (4h)
    - [ ] QA-001: 测试核心功能真实API调用
  - **Sprint 2: AI增强功能**（估算: 3天）
    - [ ] BE-002: 实现AI组合分析API (6h)
    - [ ] BE-003: 实现事件影响矩阵API (8h)
    - [ ] FE-004: 集成AI功能到HoldingsList.vue (1h)
    - [ ] QA-002: 测试AI组合分析
  - **Sprint 3: 次要功能**（估算: 1天）
    - [ ] FE-005: EventDetail.vue 接入真实API (1h)
    - [ ] FE-006: DailyReview.vue 接入真实API (1h)
    - [ ] FE-007: SettingsPage.vue 接入真实API (15min)
    - [ ] QA-003: 完整回归测试
  - 依赖: ✅ 大部分后端API已完成
  - 阻塞: ❌ 3个后端API需要实现（策略管理、AI组合分析、事件影响矩阵）

- [ ] **前端AI功能对接**
  - AI分析结果展示组件
  - AI对话界面
  - 批量分析进度显示
  - 每日复盘展示页面
  - 估算: 1周
  - 依赖: ✅ 后端AI已完成

- [ ] **事件分析功能**（PRD v3.1核心功能）
  - 4大类别、16个子类型事件管理
  - AI事件影响分析
  - 事件时间线可视化
  - 估算: 3周
  - 依赖: ✅ AI后端已完成

### 技术任务

- [ ] **数据缓存机制** 🟡
  - Redis缓存股票数据
  - 15分钟有效期
  - 减少API调用
  - 估算: 2天
  - 优先级: P1（可与前端并行）

- [ ] **CI/CD流水线**
  - GitHub Actions配置
  - 自动化测试
  - 自动部署
  - 估算: 3天

- [x] **代码模板完善** ✅
  - Service模板
  - API模板
  - Repository模板
  - 完成时间: 2025-11-19

---

## 🟡 中优先级（P1）

### 功能需求

- [ ] **数据导入功能**
  - Excel导入交易记录
  - CSV导入持仓数据
  - 数据验证和去重
  - 估算: 1周

- [ ] **报表生成**
  - 持仓报表
  - 收益报表
  - 交易流水报表
  - 估算: 1周

### 技术任务

- [ ] **单元测试**
  - Service层单元测试
  - Converter/Builder测试
  - 覆盖率>80%
  - 估算: 1周

- [ ] **集成测试**
  - API端点测试
  - 数据库集成测试
  - 估算: 3天

- [ ] **性能优化**
  - 数据库查询优化
  - 前端加载优化
  - 估算: 3天

---

## 🟢 低优先级（P2）

### 功能需求

- [ ] **消息通知**
  - 事件提醒
  - 交易提醒
  - 系统通知
  - 估算: 3天

- [ ] **用户偏好设置**
  - 界面主题
  - 通知设置
  - 数据展示偏好
  - 估算: 2天

- [ ] **移动端适配**
  - 响应式布局
  - 移动端优化
  - 估算: 1周

### 技术任务

- [ ] **监控和日志**
  - 应用性能监控
  - 错误日志收集
  - 估算: 2天

- [ ] **文档完善**
  - API文档自动生成
  - 用户使用手册
  - 估算: 3天

---

## ⏸️ 待评估

### 新功能提议

- [ ] **多用户权限管理**
  - 角色权限系统
  - 数据隔离
  - 待评估: 需求确认中

- [ ] **智能提醒**
  - 股票价格提醒
  - 事件智能推送
  - 待评估: AI能力评估

- [ ] **数据可视化增强**
  - 交互式图表
  - 自定义看板
  - 待评估: 技术方案选型

---

## 📋 需求来源

| 需求 | 来源 | 提出日期 | 优先级 |
|------|------|---------|--------|
| 事件分析功能 | PRD v3.1 | 2025-11-17 | P0 |
| AI投资分析 | PRD v3.1 | 2025-11-17 | P0 |
| 数据导入 | 用户反馈 | 2025-11-18 | P1 |
| CI/CD | 技术债务 | 2025-11-19 | P0 |

---

## 🔄 需求状态流转

```
新建 → 待评估 → 已评估 → 已排期 → 开发中 → 已完成
```

---

**最后更新**: 2025-11-20
**下次评审**: 每周一

---

## 📊 附件

- [前端Mock数据清理详细报告](./frontend-mock-cleanup.md) - 包含所有待清理页面的详细分析和任务拆分
